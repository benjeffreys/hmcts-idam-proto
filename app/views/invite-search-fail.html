{% extends "layout.html" %} {% block page_title %} GOV.UK prototype kit {% endblock %} {% block content %}

<script>
  function search() {

    $("#loading").removeClass("hidden");
    $("#details").addClass("hidden");
    var email = document.getElementById("emailAddress").value;

    $.post("/users/search", {
        emailAddress: email
      },
      function(data, status, jqXHR) {
        $("#loading").addClass("hidden");
        $("#details").removeClass("hidden");
        updateUsers(data);
      });

  }

  function updateUsers(user) {

    var containerDiv = document.getElementById("userDetails");
    if (user === null || user === "" || user === 'undefined') {
      var hiddenId = document.getElementById("userId");
      hiddenId.value = "";
      document.getElementById("newEmailAddress").value = document.getElementById("emailAddress").value;
      containerDiv.innerHTML = "Could not find a user with the specified email address.";
      $("#inviteButton").removeClass("hidden");
    } else {
      var hiddenId = document.getElementById("userId");
      hiddenId.value = user.id;
      containerDiv.innerHTML = user.forename + " " + user.surname + ' <br><button type="submit" class="button">Edit</button>';
      $("#inviteButton").addClass("hidden");
    }
  }
</script>

<main id="content" role="main">

  {% include "includes/phase_banner_beta.html" %}

  <div class="breadcrumbs">
    <ol>
      <li><a href="/">Home</a></li>
      <li>Invite Users</li>
    </ol>
  </div>

  <div class="grid-row">
    <div class="column-full">

      <h1 class="heading-large">Invite Users</h1>
      <p>Invite a user to a private beta by entering their full email address below.</p>

      <div class="form-group">
        <label for="emailAddress">
          <span class="form-label-bold">Email</span>
          <span class="error-message">User not found</span>
        </label>
        <input class="form-control" type="text" id="emailAddress" name="emailAddress" value="fred.blogs@hmcts.net" /><br/><br />
        <form action="/invite-search-success.html">
          <button class="button" type="submit">
            Search again
          </button>
        </form>
      </div>

    </div>
  </div>

  <div class="grid-row">
    <div class="column-full">

      <div id="details">

        <form action="/invite-add.html">
          <div id="userDetails">
            Alternatively, you can use the above email address to invite a new user to a private beta.<br/><br/>
            <button id="editButton" class="button" type="submit">Invite new user</button>
          </div>
          <input type="hidden" id="userId" name="userId" />
        </form>
        <br/>
        <a href="admin-home-au.html">Return to main menu</a>

      </div>

    </div>
  </div>

</main>

{% endblock %}
